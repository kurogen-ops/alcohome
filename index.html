<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ALCO HOME | Premium Store</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #c5a059;
            --gold-glow: rgba(197, 160, 89, 0.5);
            --dark-bg: #0d0d0d;
            --card-bg: #161616;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Montserrat', sans-serif !important; }
        body { margin: 0; background: var(--dark-bg); color: #fff; overflow-x: hidden; padding-bottom: 100px; touch-action: pan-y; }

        .top-bar { 
            position: sticky; top: 0; z-index: 1500;
            padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; 
            background: rgba(13, 13, 13, 0.95); backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(197, 160, 89, 0.2);
        }

        .search-box { position: relative; margin: 10px 15px; }
        .search-input {
            width: 100%; background: #1a1a1a; border: 1px solid rgba(197, 160, 89, 0.3);
            border-radius: 10px; padding: 10px 15px; color: #fff; font-size: 14px; outline: none;
        }
        .search-input:focus { border-color: var(--gold); }

        .btn-catalog-top { 
            background: rgba(197, 160, 89, 0.1); border: 1px solid var(--gold); color: var(--gold); 
            padding: 10px 15px; border-radius: 8px; font-size: 10px; font-weight: 800; 
            text-transform: uppercase; cursor: pointer; transition: 0.3s;
        }
        
        #catalog-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.7);
            z-index: 2400; display: none; opacity: 0; transition: 0.4s;
            backdrop-filter: blur(4px);
        }
        #catalog-sidebar {
            position: fixed; top: 0; left: -280px; width: 280px; height: 100%;
            background: #111; z-index: 2401; padding: 30px 20px;
            border-right: 2px solid var(--gold);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex; flex-direction: column; overflow-y: auto;
        }
        #catalog-sidebar.open { left: 0; }
        
        .sidebar-brand { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid rgba(197,160,89,0.1); }
        .sidebar-brand img { width: 50px; border-radius: 50%; border: 1px solid var(--gold); margin-bottom: 10px; }
        .sidebar-brand div { color: var(--gold); font-size: 14px; font-weight: 800; letter-spacing: 3px; text-transform: uppercase; }

        .cat-list-wrapper { display: flex; flex-direction: column; gap: 8px; }
        .cat-item-side {
            background: #1a1a1a; padding: 16px; border-radius: 12px;
            text-align: left; border: 1px solid rgba(255,255,255,0.03);
            transition: 0.3s; cursor: pointer; display: flex; align-items: center;
        }
        .cat-item-side:hover { border-color: var(--gold); box-shadow: 0 0 10px var(--gold-glow); }
        .cat-item-side span { font-size: 12px; font-weight: 700; text-transform: uppercase; color: #888; letter-spacing: 1px; }

        header { text-align: center; padding: 30px 0; }
        .header-logo img { width: 70px; border-radius: 50%; border: 1px solid var(--gold); }
        .header-logo h1 { color: var(--gold); letter-spacing: 6px; font-size: 18px; margin-top: 12px; text-transform: uppercase; }

        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; padding: 0 15px; }
        .product-card { 
            background: var(--card-bg); padding: 15px; border-radius: 20px; 
            border: 1px solid rgba(255,255,255,0.05); transition: 0.3s ease;
            cursor: pointer; position: relative;
        }
        /* –ü–û–î–°–í–ï–¢–ö–ê –ü–†–ò –ù–ê–í–ï–î–ï–ù–ò–ò */
        .product-card:hover { 
            border-color: var(--gold); 
            box-shadow: 0 0 15px rgba(197, 160, 89, 0.3);
            transform: translateY(-3px);
        }
        .product-card:active { transform: scale(0.98); }

        .product-card img { width: 100%; height: 130px; object-fit: contain; margin-bottom: 10px; pointer-events: none; }
        .product-card h3 { font-size: 11px; color: #efefef; height: 32px; overflow: hidden; margin: 0; pointer-events: none; }
        
        .add-action-box { 
            background: rgba(197, 160, 89, 0.1); border: 1px solid var(--gold); 
            border-radius: 10px; padding: 10px; text-align: center; margin-top: 10px;
        }
        .add-action-box span { color: var(--gold); font-size: 10px; font-weight: 700; pointer-events: none; }

        .bottom-nav { 
            position: fixed; bottom: 0; width: 100%; 
            background: rgba(255, 255, 255, 0.03); 
            backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            border-top: 1px solid rgba(255, 255, 255, 0.1); 
            display: flex; justify-content: space-around; 
            padding: 8px 10px 20px; z-index: 2000; 
        }
        .nav-btn { flex: 1; height: 42px; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .nav-btn img { width: 26px; height: 26px; }

        .checkout-bar { position: fixed; bottom: 85px; left: 50%; transform: translateX(-50%); background: #fff; color: #000; padding: 12px 30px; border-radius: 30px; font-weight: 900; font-size: 12px; z-index: 1001; display: none; box-shadow: 0 10px 30px rgba(0,0,0,0.5); cursor: pointer; }

        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 3000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
        .modal-content { background: #111; border: 1px solid var(--gold); padding: 25px; width: 90%; max-width: 400px; border-radius: 25px; position: relative; }
        .btn-main { background: var(--gold); color: #000; border: none; padding: 15px; width: 100%; border-radius: 12px; font-weight: 800; margin-top: 20px; text-transform: uppercase; cursor: pointer; }
        .branch-option { background: #1a1a1a; padding: 15px; margin: 10px 0; border-radius: 12px; text-align: center; border: 1px solid transparent; cursor: pointer; }
        .branch-option:active { border-color: var(--gold); background: #222; }
        
        .input-field { width: 100%; background: #222; border: 1px solid var(--gold); color: #fff; padding: 15px; border-radius: 12px; font-size: 14px; margin-top: 10px; outline: none; }
        
        .qty-control { display: flex; justify-content: center; align-items: center; gap: 20px; margin: 15px 0; background: #1a1a1a; padding: 10px; border-radius: 15px; border: 1px solid rgba(197,160,89,0.2); }
        .qty-btn { background: var(--gold); border: none; width: 35px; height: 35px; border-radius: 8px; font-weight: 900; font-size: 20px; cursor: pointer; color: #000; display: flex; align-items: center; justify-content: center; }
        #temp-qty { font-size: 20px; font-weight: 800; color: #fff; min-width: 30px; text-align: center; }

        .cart-item-row { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #222; }
        .cart-info { flex: 1; font-size: 12px; line-height: 1.4; padding-right: 10px; }
        .cart-actions { display: flex; align-items: center; gap: 8px; }
        .cart-mini-btn { width: 25px; height: 25px; background: #333; color: var(--gold); border: 1px solid var(--gold); border-radius: 6px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .btn-edit-item { font-size: 14px; margin-left: 5px; cursor: pointer; opacity: 0.7; }
        /* –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –µ—Å–ª–∏ –Ω–µ—Ç –∫–Ω–æ–ø–æ–∫ */
        .btn-delete-item { color: #ff4444; font-size: 18px; margin-left: 10px; cursor: pointer; }
    </style>
</head>
<body>

<div class="top-bar">
    <button class="btn-catalog-top" onclick="toggleSidebar()">‚ò∞ –ö–∞—Ç–∞–ª–æ–≥</button>
    <div style="color: var(--gold); font-size: 10px; font-weight: 800; letter-spacing: 1px;">ALCO HOME</div>
</div>

<div class="search-box">
    <input type="text" id="search-input" class="search-input" placeholder="–ü–æ–∏—Å–∫ –Ω–∞–ø–∏—Ç–∫–æ–≤..." oninput="handleSearch()">
</div>

<div id="catalog-overlay" onclick="toggleSidebar()"></div>
<div id="catalog-sidebar">
    <div class="sidebar-brand"><img src="alc.png" alt="Logo"><div>ALCO HOME</div></div>
    <div class="cat-list-wrapper">
        <div class="cat-item-side" onclick="selectCategory('whisky')"><span>ü•É –í–∏—Å–∫–∏</span></div>
        <div class="cat-item-side" onclick="selectCategory('vodka')"><span>üç∏ –í–æ–¥–∫–∞</span></div>
        <div class="cat-item-side" onclick="selectCategory('cognac')"><span>üç∑ –ö–æ–Ω—å—è–∫</span></div>
        <div class="cat-item-side" onclick="selectCategory('draft')"><span>üç∫ –†–∞–∑–ª–∏–≤–Ω–æ–µ</span></div>
        <div class="cat-item-side" onclick="selectCategory('wine')"><span>üçæ –í–∏–Ω–æ</span></div>
        <div class="cat-item-side" onclick="selectCategory('beer')"><span>üç∫ –ü–∏–≤–æ</span></div>
        <div class="cat-item-side" onclick="selectCategory('snacks')"><span>ü•® –ó–∞–∫—É—Å–∫–∏</span></div>
    </div>
    <div onclick="toggleSidebar()" style="margin-top:20px; text-align:center; color:#444; font-size:10px; font-weight:700; padding: 20px;">–ó–ê–ö–†–´–¢–¨</div>
</div>

<header>
    <div class="header-logo"><img src="alc.png" alt="Logo"><h1>ALCO HOME</h1></div>
</header>

<div id="home">
    <div style="text-align: center; color: var(--gold); font-size: 12px; font-weight: 700; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 2px;" id="current-cat-label">–í–∏—Å–∫–∏</div>
    <div class="grid" id="main-catalog"></div>
</div>

<div class="bottom-nav">
    <a href="https://instagram.com/alco_home_shymkent" class="nav-btn"><img src="https://img.icons8.com/ios-filled/50/c5a059/instagram-new--v1.png"></a>
    <div class="nav-btn" onclick="openModal('address-modal')"><img src="https://img.icons8.com/ios-filled/50/c5a059/marker.png"></div>
    <div class="nav-btn" onclick="openModal('support-modal')"><img src="https://img.icons8.com/ios-filled/50/c5a059/whatsapp--v1.png"></div>
</div>

<div class="checkout-bar" id="checkout-bar" onclick="openModal('cart-modal')">–í–ê–® –ó–ê–ö–ê–ó (<span id="cart-count">0</span>)</div>

<div id="volume-qty-modal" class="modal">
    <div class="modal-content">
        <h2 id="modal-prod-name" style="color:var(--gold); font-size: 14px; text-align: center; text-transform: uppercase; margin-bottom:10px;">–¢–æ–≤–∞—Ä</h2>
        <div style="text-align:center; font-size:10px; color:#555; font-weight:700; margin-bottom:5px;">–£–ö–ê–ñ–ò–¢–ï –ö–û–õ–ò–ß–ï–°–¢–í–û</div>
        <div class="qty-control">
            <button class="qty-btn" onclick="changeTempQty(-1)">-</button>
            <span id="temp-qty">1</span>
            <button class="qty-btn" onclick="changeTempQty(1)">+</button>
        </div>
        <div style="text-align:center; font-size:10px; color:#555; font-weight:700; margin-bottom:10px;">–í–´–ë–ï–†–ò–¢–ï –û–ë–™–ï–ú</div>
        <div id="volume-options-list"></div>
        <button onclick="closeModal('volume-qty-modal')" style="background:none; border:none; color:#444; width:100%; margin-top:15px; font-weight:700; cursor: pointer;">–û–¢–ú–ï–ù–ê</button>
    </div>
</div>

<div id="custom-input-modal" class="modal">
    <div class="modal-content">
        <h2 id="custom-input-title" style="color:var(--gold); font-size: 14px; text-align: center; text-transform: uppercase;">–í–≤–æ–¥</h2>
        <input type="number" id="custom-input-field" class="input-field" placeholder="..." step="0.1">
        <button class="btn-main" onclick="confirmCustomInput()">–°–û–•–†–ê–ù–ò–¢–¨</button>
        <button onclick="closeModal('custom-input-modal')" style="background:none; border:none; color:#444; width:100%; margin-top:15px; font-weight:700; cursor: pointer;">–û–¢–ú–ï–ù–ê</button>
    </div>
</div>

<div id="cart-modal" class="modal">
    <div class="modal-content">
        <h2 style="color:var(--gold); font-size: 16px; text-align: center; text-transform: uppercase;">–ú–æ–π –∑–∞–∫–∞–∑</h2>
        <div id="cart-items-list" style="max-height: 300px; overflow-y: auto; margin: 15px 0;"></div>
        <button class="btn-main" onclick="openModal('branch-modal')">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
        <button onclick="closeModal('cart-modal')" style="background:none; border:none; color:#444; width:100%; margin-top:15px; font-weight:700; cursor: pointer;">–ó–ê–ö–†–´–¢–¨</button>
    </div>
</div>

<div id="branch-modal" class="modal"><div class="modal-content"><h2 style="color:var(--gold); font-size: 16px; text-align: center; text-transform: uppercase;">–ì–¥–µ –∑–∞–±–µ—Ä–µ—Ç–µ?</h2><div class="branch-option" onclick="selectBranch('branch1')"><b>–§–ò–õ–ò–ê–õ ‚Ññ1</b><br><small>–ù—É—Ä—Å–∞—Ç 2-50</small></div><div class="branch-option" onclick="selectBranch('branch2')"><b>–§–ò–õ–ò–ê–õ ‚Ññ2</b><br><small>17-–º–∫—Ä, 19</small></div><button onclick="closeModal('branch-modal')" style="background:none; border:none; color:#444; width:100%; margin-top:10px; cursor: pointer;">–ù–ê–ó–ê–î</button></div></div>
<div id="delivery-modal" class="modal"><div class="modal-content"><h2 style="color:var(--gold); font-size: 14px; text-align: center; text-transform: uppercase;">–ö—É–¥–∞ –¥–æ—Å—Ç–∞–≤–∏—Ç—å?</h2><input type="text" id="delivery-address" class="input-field" placeholder="–£–ª–∏—Ü–∞, –¥–æ–º... / –°—Å—ã–ª–∫–∞ 2GIS"><button class="btn-main" onclick="finalOrderSend()">–û–§–û–†–ú–ò–¢–¨ –í WHATSAPP</button><button onclick="closeModal('delivery-modal')" style="background:none; border:none; color:#444; width:100%; margin-top:15px; font-weight:700; cursor: pointer;">–û–¢–ú–ï–ù–ê</button></div></div>
<div id="address-modal" class="modal"><div class="modal-content"><h2 style="color:var(--gold); font-size: 16px; text-align: center; text-transform: uppercase;">–ù–∞—à–∏ –º–∞—Ä–∫–µ—Ç—ã</h2><div class="branch-option" onclick="window.open('https://go.2gis.com/Vk4ed')">–§–ò–õ–ò–ê–õ ‚Ññ1<br><small>–ù—É—Ä—Å–∞—Ç 2, –¥–æ–º 50</small></div><div class="branch-option" onclick="window.open('https://go.2gis.com/8m43i')">–§–ò–õ–ò–ê–õ ‚Ññ2<br><small>17-–π –º–∫—Ä, –¥–æ–º 19</small></div><button onclick="closeModal('address-modal')" style="background:none; border:none; color:#444; width:100%; margin-top:15px; cursor: pointer;">–ó–ê–ö–†–´–¢–¨</button></div></div>
<div id="support-modal" class="modal"><div class="modal-content"><h2 style="color:var(--gold); font-size: 16px; text-align: center;">–ù–£–ñ–ù–ê –ü–û–ú–û–©–¨?</h2><div class="branch-option" onclick="window.open('https://wa.me/77479102650')">–ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†</div><div class="branch-option" onclick="window.open('https://wa.me/77079814338')">–û–ü–ï–†–ê–¢–û–†</div><button onclick="closeModal('support-modal')" style="background:none; border:none; color:#444; width:100%; margin-top:10px; cursor: pointer;">–ó–ê–ö–†–´–¢–¨</button></div></div>

<script>
    const products = {
        whisky: [ 
            {name: "Jameson", vols: ["0.5", "0.7", "1.0"], img: "jameson.png"},
            {name: "Jameson Black Barrel", vols: ["0.7"], img: "j-black.png"},
            {name: "Jameson Orange", vols: ["0.7"], img: "j-orange.png"},
            {name: "Jameson Crested", vols: ["0.7"], img: "j-crested.png"},
            {name: "Jameson –≤ –∫–æ—Ä–æ–±–∫–µ", vols: ["0.7"], img: "j-box.png"},
            {name: "Jack Daniel‚Äôs", vols: ["0.5", "0.7", "1.0"], img: "jack.png"},
            {name: "Jack Daniel‚Äôs Honey", vols: ["0.3"], img: "jack-h.png"},
            {name: "Ballantines", vols: ["0.5", "0.7", "1.0"], img: "ballantines.png"},
            {name: "Ballantines –≤ –∫–æ—Ä–æ–±–∫–µ", vols: ["0.7"], img: "ball-box.png"},
            {name: "Chivas Regal 12Y", vols: ["0.5", "0.7", "1.0"], img: "chivas.png"},
            {name: "Monkey Shoulder", vols: ["0.5", "0.7"], img: "monkey.png"},
            {name: "Glenmorangie 10Y", vols: ["0.7"], img: "glenmo.png"},
            {name: "Macallan 12Y", vols: ["0.7"], img: "macallan.png"},
            {name: "Dewar‚Äôs 8Y", vols: ["0.7"], img: "dewars.png"},
            {name: "The Glenlivet 12Y", vols: ["0.7"], img: "glenlivet.png"},
            {name: "Glenfiddich 12Y", vols: ["0.7"], img: "glenfiddich.png"},
            {name: "Aberlour 12Y", vols: ["0.7"], img: "aberlour.png"}
        ],
        vodka: [ 
            {name: "–ê–±—Å–æ–ª—é—Ç", vols: ["0.5", "0.7", "1.0"], img: "absolute.png"},
            {name: "–ö–æ—Å–∫–µ–Ω–∫–æ—Ä–≤–∞", vols: ["0.5", "0.7"], img: "kosken.png"},
            {name: "–¶–∞—Ä—Å–∫–æ–µ —Å–µ–ª–æ", vols: ["0.7"], img: "tsar-s.png"},
            {name: "–¶–∞—Ä—Å–∫–∞—è –∑–æ–ª–æ—Ç–∞—è", vols: ["0.5", "0.7", "1.0"], img: "tsar-g.png"},
            {name: "–¶–∞—Ä—Å–∫–∞—è –û—Ä–∏–≥–∏–Ω–∞–ª", vols: ["0.5", "0.7", "1.0"], img: "tsar.png"},
            {name: "–û–Ω–µ–≥–∏–Ω", vols: ["0.5", "0.7"], img: "onegin.png"},
            {name: "–†—É—Å—Å–∫–∏–π –°—Ç–∞–Ω–¥–∞—Ä—Ç", vols: ["0.5", "0.7", "1.0"], img: "rs.png"},
            {name: "–§–æ—Ä—Ç—É–Ω–∞", vols: ["0.5", "0.7"], img: "fortuna.png"},
            {name: "–ú–æ–Ω—Ç –ë–ª–∞–Ω–∫", vols: ["0.7"], img: "mont.png"},
            {name: "–û—Ä–≥–∞–Ω–∏–∫–∞", vols: ["0.5", "0.7"], img: "organika.png"},
            {name: "GREY GOOSE", vols: ["0.5", "0.7", "1.0"], img: "gg.png"},
            {name: "Belvedere", vols: ["0.7"], img: "belvedere.png"},
            {name: "Finlandia", vols: ["0.5", "0.7", "1.0"], img: "finlandia.png"},
            {name: "Beluga", vols: ["0.5", "0.7", "1.0"], img: "beluga.png"},
            {name: "“ö–∞–∑–∞“õ—Å—Ç–∞–Ω", vols: ["0.5"], img: "kz.png"},
            {name: "SKYY", vols: ["0.7"], img: "skyy.png"}
        ],
        cognac: [ 
            {name: "Ararat 7Y –≤ –∫–æ—Ä.", vols: ["0.7"], img: "ararat7-box.png"},
            {name: "Ararat 15Y", vols: ["0.5"], img: "ararat15.png"},
            {name: "Ararat 7Y", vols: ["0.5", "0.7"], img: "ararat7.png"},
            {name: "Ararat 5Y", vols: ["0.5", "0.7"], img: "ararat5.png"},
            {name: "Ararat 3Y", vols: ["0.5", "0.7"], img: "ararat3.png"},
            {name: "Ararat Coffee", vols: ["0.5"], img: "ararat-c.png"},
            {name: "Ararat 10Y", vols: ["0.7"], img: "ararat10.png"},
            {name: "Hennessy VS", vols: ["0.5", "0.7", "1.0"], img: "henn.png"},
            {name: "Martell VS", vols: ["0.5", "0.7"], img: "martell.png"},
            {name: "Martell VSOP", vols: ["0.5", "0.7"], img: "martell-v.png"}
        ],
        draft: [ 
            {name: "–ü—Ä–∞–≥–∞ —Ä—É–¥–µ–Ω—Å–∫–æ–µ", img: "d1.png"}, 
            {name: "–ü—Ä–∞–≥–∞ –Ω–µ—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω–æ–µ", img: "d.png"},
            {name: "–®—ã–º–∫–µ–Ω—Ç—Å–∫–æ–µ", img: "dshym.png"},
            {name: "–ù–µ–º–µ—Ü–∫–æ–µ", img: "pnemeckoe.png"},
            {name: "–ú–æ—Ö–∏—Ç–æ", img: "mohito.png"},
            {name: "–ü—Ä–∞–≥–∞ —à—ã–º–∫–µ–Ω—Ç", img: "ppragashym.png"},
            {name: "Y√çCHANG", img: "pyichang.png"}
        ],
        wine: [ 
            {name: "Vellevine Kindzmarauli", img: "wvelkindz.png"}, 
            {name: "Vellevine Pirosmani", img: "wvelpiros.png"},
            {name: "Vellevine Tsinandali", img: "wveltsinan.png"},
            {name: "Brancott Sauvignon", img: "wbrsauvi.png"}, 
            {name: "Brancott Pinot Noir", img: "wbrpinot.png"},
            {name: "Corvezzo Prosecco", img: "wcorprosecco.png"}, 
            {name: "Corvezzo Pinot Grigio", img: "wcorpinot.png"}, 
            {name: "Corvezzo Merlot", img: "wcormerlot.png"},
            {name: "–ö–∞–≥–æ—Ä", img: "w6.png"},
            {name: "Askaneli Kindzmarauli", img: "waskkindz.png"},
            {name: "Askaneli Saperavi", img: "wassaper.png"},
            {name: "Askaneli Rkatsiteli", img: "waskrkat.png"}
        ],
        beer: [ 
            {name: "Heineken", vols: ["0.3", "0.5"], img: "heineken.png"},
            {name: "Krusovice", vols: ["0.5"], img: "krusovice.png"},
            {name: "Max Jack‚Äôs", img: "maxjacks.png"},
            {name: "Efes", img: "efes.png"},
            {name: "Miller", vols: ["0.3", "0.5"], img: "miller.png"},
            {name: "Corona extra", vols: ["0.3"], img: "corona.png"},
            {name: "Bavarian", vols: ["0.5"], img: "bavarian.png"},
            {name: "Wukong", vols: ["0.5"], img: "wukong.png"},
            {name: "Holsten", vols: ["0.5"], img: "holsten.png"},
            {name: "Blanc 1664", img: "blancjb.png"},
            {name: "Rose 1664", img: "blancsteklo.png"},
            {name: "Carlslerg", img: "carlslerg.png"},
            {name: "Bud", vols: ["0.3", "0.5"], img: "bud.png"},
            {name: "Tsintao", vols: ["0.3"], img: "tsintao.png"},
            {name: "Clausthaler", vols: ["0.3"], img: "clausthaler.png"},
            {name: "Astera", vols: ["0.5"], img: "astera.png"},
            {name: "Line brew premium lager", vols: ["0.5"], img: "linebrew.png"},
            {name: "Gubernija pilsners", vols: ["0.5"], img: "gubpils.png"},
            {name: "Fest bier", vols: ["0.5"], img: "festbier.png"},
            {name: "Gubernija Extra", vols: ["0.5"], img: "gubextra.png"},
            {name: "Ayinger", vols: ["0.5"], img: "ayinger.png"},
            {name: "Stun", vols: ["0.3"], img: "stun.png"},
            {name: "Gin tonic", img: "gintonic.png"}
        ],
        snacks: [ 
            {name: "Big Bob Japan", img: "bbjapan.png"},
            {name: "Big Bob Italy", img: "bbitaly.png"},
            {name: "Big Bob Georgia", img: "bbgeorgia.png"},
            {name: "Big Bob Qazaqstan", img: "bbqazaqstan.png"},
            {name: "Big Bob Thailand", img: "bbthailand.png"},
            {name: "Big Bob –§–∏—Å—Ç–∞—à–∫–∏ 30–≥", img: "bbfistashki30.png"},
            {name: "Big Bob –§–∏—Å—Ç–∞—à–∫–∏ 50–≥", img: "bbfistashki50.png"},
            {name: "Big Bob –ê—Ä–∞—Ö–∏—Å —Å–æ–ª–µ–Ω—ã–π", img: "bbarahissol.png"},
            {name: "–ú–æ—Ä—Å–∫–∏–µ –ê–Ω—á–æ—É—Å—ã", img: "anchous.png"},
            {name: "–ú–æ—Ä—Å–∫–æ–π –ñ–µ–ª—Ç—ã–π –ø–æ–ª–æ—Å–∞—Ç–∏–∫", img: "polosatik.png"},
            {name: "Pringles Paprika", img: "pspaprika.png"},
            {name: "Pringles Original", img: "psoriginal.png"},
            {name: "Pringles Sour Cream & Onion", img: "pssmetana.png"},
            {name: "Flint 60–≥", img: "flint60.png"},
            {name: "Flint 100–≥", img: "flint100.png"},
            {name: "Flint –ì—Ä–µ–Ω–∫–∏ 90–≥", img: "flint90.png"},
            {name: "Flint 200–≥", img: "flint200.png"},
            {name: "Lays", img: "lays.png"},
            {name: "Averton", img: "averton.png"},
            {name: "–ë”©—Ä—Ç–µ –ö—É—Ä—Ç", img: "bortekurt.png"},
            {name: "–ï—Ä–º–∞–∫ –ö—É—Ä—Ç", img: "ermak.png"},
            {name: "–ß–µ—á–∏–ª –≤–µ—Å–æ–≤–æ–π", img: "kemalves.png", type: "weight"},
            {name: "–ß–µ—á–∏–ª –ø–∞—É—Ç–∏–Ω–∫–∞ –≤–µ—Å–æ–≤–æ–π", img: "pautinkaves.png", type: "weight"},
            {name: "–†—ã–±–Ω—ã–µ –ø–∞–ª–æ—á–∫–∏", img: "rbpal.png", type: "pieces"},
            {name: "–ñ–µ—Ä–µ—Ö", img: "fish.png", type: "weight"},
            {name: "–õ–µ—â—å", img: "fish.png", type: "weight"},
            {name: "–ê–¥—ã–≥–µ–π—Å–∫–∏–π —á–µ—á–∏–ª –∫–æ—Å–∏—á–∫–∞", img: "adkosichka.png"},
            {name: "–ê–¥—ã–≥–µ–π—Å–∫–∏–π —á–µ—á–∏–ª –ø–∞—É—Ç–∏–Ω–∫–∞", img: "adpautinka.png"},
            {name: "–ë”©—Ä—Ç–µ —á–µ—á–∏–ª", img: "bortechecil.png"},
        ]
    };

    let cart = JSON.parse(localStorage.getItem('alco_cart')) || []; 
    let currentCategory = 'whisky';
    let tempCustomName = '';
    let tempCustomType = '';
    let selectedBranch = '';
    let currentTempQty = 1;
    let currentTempProdName = '';
    let editingIndex = -1;

    function toggleSidebar() {
        const sidebar = document.getElementById('catalog-sidebar');
        const overlay = document.getElementById('catalog-overlay');
        if(sidebar.classList.contains('open')) {
            sidebar.classList.remove('open');
            overlay.style.opacity = '0';
            setTimeout(() => overlay.style.display = 'none', 300);
        } else {
            overlay.style.display = 'block';
            setTimeout(() => { overlay.style.opacity = '1'; sidebar.classList.add('open'); }, 10);
        }
    }

    function handleSearch() {
        const query = document.getElementById('search-input').value.toLowerCase();
        const list = document.getElementById('main-catalog');
        const label = document.getElementById('current-cat-label');
        if (query.trim() === "") { selectCategory(currentCategory); return; }
        label.innerText = "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞";
        list.innerHTML = '';
        Object.keys(products).forEach(cat => {
            products[cat].forEach(p => { if (p.name.toLowerCase().includes(query)) renderProductCard(p, cat); });
        });
    }

    function selectCategory(type) {
        currentCategory = type;
        const labels = {whisky:'–í–∏—Å–∫–∏', vodka:'–í–æ–¥–∫–∞', cognac:'–ö–æ–Ω—å—è–∫', draft:'–†–∞–∑–ª–∏–≤–Ω–æ–µ', wine:'–í–∏–Ω–æ', beer:'–ü–∏–≤–æ', snacks:'–ó–∞–∫—É—Å–∫–∏'};
        document.getElementById('current-cat-label').innerText = labels[type];
        document.getElementById('search-input').value = ''; 
        showCategory(type);
        toggleSidebar();
    }

    function showCategory(type) {
        const list = document.getElementById('main-catalog');
        list.innerHTML = ''; 
        products[type].forEach(p => renderProductCard(p, type));
    }

    function renderProductCard(p, cat) {
        const list = document.getElementById('main-catalog');
        list.innerHTML += `
            <div class="product-card" onclick="handleProductClick('${p.name}', '${cat}')">
                <img src="${p.img}" onerror="this.src='https://via.placeholder.com/150/111/c5a059?text=ALCO'">
                <h3>${p.name}</h3>
                <div class="add-action-box"><span>+ –í –∫–æ—Ä–∑–∏–Ω—É</span></div>
            </div>`;
    }

    function handleProductClick(name, catType) {
        editingIndex = -1; 
        const type = catType || currentCategory;
        const prod = products[type].find(p => p.name === name);
        
        if(type === 'draft') {
            openCustomInput(name, 'liter', '–°–∫–æ–ª—å–∫–æ –ª–∏—Ç—Ä–æ–≤?');
        } 
        else if (type === 'snacks' && prod.type === 'weight') {
            openCustomInput(name, 'weight', '–í–≤–µ–¥–∏—Ç–µ –≤–µ—Å (–≥—Ä–∞–º–º)');
        }
        else if (prod.vols) {
            openVolumePicker(name, prod.vols, 1);
        } 
        else {
            addToCart(name, '', 1);
        }
    }

    function openVolumePicker(name, vols, qty) {
        currentTempProdName = name;
        currentTempQty = qty;
        document.getElementById('temp-qty').innerText = qty;
        document.getElementById('modal-prod-name').innerText = name;
        const volList = document.getElementById('volume-options-list');
        volList.innerHTML = '';
        vols.forEach(v => {
            volList.innerHTML += `<div class="branch-option" onclick="addToCartWithVol('${v}')"><b>–û–ë–™–ï–ú ${v} –õ</b></div>`;
        });
        openModal('volume-qty-modal');
    }

    function editCartItem(idx) {
        editingIndex = idx;
        const item = cart[idx];
        let prodInfo = null;
        Object.keys(products).forEach(cat => {
            const found = products[cat].find(p => p.name === item.name);
            if (found) prodInfo = { ...found, category: cat };
        });

        if (!prodInfo) return;

        if (prodInfo.category === 'draft') {
            openCustomInput(item.name, 'liter', '–ò–∑–º–µ–Ω–∏—Ç—å –æ–±—ä–µ–º (–ª)');
        } else if (prodInfo.category === 'snacks' && prodInfo.type === 'weight') {
            openCustomInput(item.name, prodInfo.type, '–ò–∑–º–µ–Ω–∏—Ç—å –≤–µ—Å');
        } else if (prodInfo.vols) {
            openVolumePicker(item.name, prodInfo.vols, item.qty);
        }
    }

    function addToCart(name, detail, qty, isCustom = false) {
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ —Å–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫–∏ +/- –≤ –∫–æ—Ä–∑–∏–Ω–µ (–¥–ª—è —Ä–∞–∑–ª–∏–≤–Ω–æ–≥–æ –∏ –≤–µ—Å–æ–≤–æ–≥–æ)
        let hideQtyControls = isCustom;

        if (editingIndex > -1) {
            cart[editingIndex].detail = detail;
            cart[editingIndex].qty = qty;
            cart[editingIndex].hideQty = hideQtyControls;
            editingIndex = -1;
        } else {
            const existingIdx = cart.findIndex(item => item.name === name && item.detail === detail);
            if (existingIdx > -1 && !isCustom) {
                cart[existingIdx].qty += qty;
            } else {
                cart.push({ name, detail, qty, hideQty: hideQtyControls });
            }
        }
        updateCartUI();
        if (navigator.vibrate) navigator.vibrate(40);
    }

    function updateCartUI() {
        localStorage.setItem('alco_cart', JSON.stringify(cart));
        let totalCount = 0;
        cart.forEach(i => totalCount += (i.hideQty ? 1 : i.qty));
        document.getElementById('cart-count').innerText = totalCount;
        document.getElementById('checkout-bar').style.display = cart.length > 0 ? 'block' : 'none';
        
        const list = document.getElementById('cart-items-list');
        list.innerHTML = '';
        cart.forEach((item, i) => {
            list.innerHTML += `
                <div class="cart-item-row">
                    <div class="cart-info">
                        <span style="color:var(--gold); font-weight:700;">${item.name}</span>
                        <span class="btn-edit-item" onclick="editCartItem(${i})">‚úèÔ∏è</span>
                        ${item.detail ? `<br><span style="color:#888;">${item.detail}</span>` : ''}
                    </div>
                    <div class="cart-actions">
                        ${!item.hideQty ? `
                            <div class="cart-mini-btn" onclick="changeCartItemQty(${i}, -1)">-</div>
                            <span style="font-weight:700; min-width:20px; text-align:center;">${item.qty}</span>
                            <div class="cart-mini-btn" onclick="changeCartItemQty(${i}, 1)">+</div>
                        ` : `
                            <div class="btn-delete-item" onclick="changeCartItemQty(${i}, -999)">‚úï</div>
                        `}
                    </div>
                </div>`;
        });
    }

    function openCustomInput(name, type, title) {
        tempCustomName = name;
        tempCustomType = type;
        document.getElementById('custom-input-title').innerText = title;
        document.getElementById('custom-input-field').value = '';
        openModal('custom-input-modal');
    }

    function confirmCustomInput() {
        const val = document.getElementById('custom-input-field').value;
        if(val > 0) {
            let detail = '';
            if(tempCustomType === 'liter') detail = `${val} –ª`;
            if(tempCustomType === 'weight') detail = `${val} –≥—Ä`;
            addToCart(tempCustomName, detail, 1, true); 
            closeModal('custom-input-modal');
        }
    }

    function changeTempQty(n) {
        currentTempQty = Math.max(1, currentTempQty + n);
        document.getElementById('temp-qty').innerText = currentTempQty;
    }

    function addToCartWithVol(vol) {
        addToCart(currentTempProdName, `${vol} –ª`, currentTempQty);
        closeModal('volume-qty-modal');
    }

    function changeCartItemQty(index, delta) {
        cart[index].qty += delta;
        if (cart[index].qty <= 0) {
            cart.splice(index, 1);
            if (cart.length === 0) closeModal('cart-modal');
        }
        updateCartUI();
    }

    function selectBranch(branch) { selectedBranch = branch; openModal('delivery-modal'); }

    function finalOrderSend() {
        const addr = document.getElementById('delivery-address').value;
        if(!addr) { alert("–£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å"); return; }
        const nums = { branch1: "77780010770", branch2: "77080021092" };
        let orderText = `üî• –ù–û–í–´–ô –ó–ê–ö–ê–ó:\n\n`;
        cart.forEach(item => { 
            orderText += `‚ñ™Ô∏è ${item.name} ${item.detail ? '(' + item.detail + ')' : ''} ${!item.hideQty ? '‚Äî ' + item.qty + ' —à—Ç.' : ''}\n`; 
        });
        orderText += `\nüìç –ê–î–†–ï–°: ${addr}`;
        window.open(`https://wa.me/${nums[selectedBranch]}?text=${encodeURIComponent(orderText)}`);
    }

    function openModal(id) { 
        document.querySelectorAll('.modal').forEach(m => m.style.display = 'none');
        document.getElementById(id).style.display = 'flex';
    }
    
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }


    let touchStartX = 0;
    let touchEndX = 0;
    let touchStartY = 0;
    let touchEndY = 0;

    const swipeThreshold = 80; 
    const edgeZone = 50; 

    document.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
        touchStartY = e.changedTouches[0].screenY;
    }, false);

    document.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        touchEndY = e.changedTouches[0].screenY;
        handleGesture();
    }, false);

    function handleGesture() {
        const diffX = touchEndX - touchStartX;
        const diffY = touchEndY - touchStartY;

        if (Math.abs(diffX) > Math.abs(diffY)) {
            if (diffX > swipeThreshold && touchStartX < edgeZone) {
                const sidebar = document.getElementById('catalog-sidebar');
                if (!sidebar.classList.contains('open')) toggleSidebar();
            }
            if (diffX < -swipeThreshold) {
                const sidebar = document.getElementById('catalog-sidebar');
                if (sidebar.classList.contains('open')) toggleSidebar();
            }
        }
    }

    window.onload = () => {
        showCategory('whisky');
        updateCartUI();
    };
</script>
</body>
</html>
